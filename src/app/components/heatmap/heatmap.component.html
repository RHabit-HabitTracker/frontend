<div class="heatmap-container">
  <h3>Task Completion Heatmap</h3>

  <div class="heatmap-grid">
    <!-- First empty cell (to align day labels) -->
    <div class="empty-cell"></div>

    <!-- Week Numbers (Top Row) -->
    <div *ngFor="let week of weeks" class="heatmap-week-label">
      W{{ week.weekNumber }}
    </div>

    <!-- Heatmap Grid: Days & Week Columns -->
    <ng-container *ngFor="let day of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']; let dayIndex = index">
      <!-- Day Labels (First Column) -->
      <div class="heatmap-day-label">
        {{ day }}
      </div>

      <!-- Week Columns -->
      <ng-container *ngFor="let week of weeks">
        <div *ngIf="hasDay(week, dayIndex); else emptyCell"
             class="heatmap-cell"
             [style.background-color]="findDay(week, dayIndex)?.color"
             [attr.title]="'Date: ' + findDay(week, dayIndex)?.date + ' | Completed: ' + findDay(week, dayIndex)?.percentage + '%'"
             (click)="onDayClick(findDay(week, dayIndex)?.date)">
        </div>
        <ng-template #emptyCell>
          <div class="heatmap-cell empty"></div>
        </ng-template>
      </ng-container>
    </ng-container>
  </div>
</div>
